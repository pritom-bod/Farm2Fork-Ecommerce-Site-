{% extends "shop/base.html" %}
{% block title %}Seller Dashboard{% endblock %}
{% block content %}
<div class="container py-5">
    <br><br><br><br><br><br>
  <div class="row mb-4 align-items-center">
    <div class="col-md-3 text-center">
      {% if seller.shop_logo %}
        <img src="{{ seller.shop_logo.url }}" alt="Logo" class="rounded-circle shadow" width="100">
      {% else %}
        <div class="rounded-circle bg-secondary d-inline-block" style="width:100px;height:100px;"></div>
      {% endif %}
      <h5 class="mt-2">{{ seller.shop_name }}</h5>
      <a href="{% url 'multivendor:seller_profile' %}" class="btn btn-link">View/Edit Profile</a>
    </div>
    <div class="col-md-9">
      <div class="row">
        <div class="col-md-4">
          <div class="card text-white bg-success mb-3">
            <div class="card-body">
              <h6>Total Products</h6>
              <p class="card-text fs-4">{{ products|length }}</p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card text-white bg-info mb-3">
            <div class="card-body">
              <h6>Orders Received</h6>
              <p class="card-text fs-4">{{ order_count }}</p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card text-white bg-primary mb-3">
            <div class="card-body">
              <h6>Earnings (Delivered)</h6>
              <p class="card-text fs-4">${{ earnings|default:"0" }}</p>
            </div>
          </div>
        </div>
      </div>
      <div class="mt-3">
        <a href="{% url 'multivendor:seller_add_product' %}" class="btn btn-primary me-2">Add Product</a>
        <a href="{% url 'multivendor:seller_orders' %}" class="btn btn-outline-secondary">View Orders</a>
         <a href="{% url 'multivendor:seller_all_products' %}" class="btn btn-outline-info">All Products</a>
      </div>
    </div>
  </div>
  <hr>
  <h4>Your Products</h4>
  <div class="table-responsive">
    <table class="table table-striped table-hover align-middle">
      <thead>
        <tr>
          <th>Title</th>
          <th>Price</th>
          <th>Discount</th>
          <th>Category</th>
          <th>Image</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for product in products %}
        <tr>
          <td>{{ product.title }}</td>
          <td>${{ product.regular_price }}</td>
          <td>${{ product.discounted_price }}</td>
          <td>{{ product.category }}</td>
          <td>
            {% if product.product_image %}
              <img src="{{ product.product_image.url }}" width="40" class="rounded" />
            {% endif %}
          </td>
          <td>
            <a href="{% url 'product_detail' product.pk %}" class="btn btn-info btn-sm">View</a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="text-center">No products yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
